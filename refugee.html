<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Refugee story</title>

	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
	<link rel="stylesheet" href="style.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
	<link href="https://fonts.googleapis.com/css?family=Ubuntu:400,700" rel="stylesheet">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body>
	
	<div class="wrapper">
		<div id="backward" class="arrow arrow__backward"><i class="fa fa-angle-left" aria-hidden="true"></i></div>

		<div class="content">
			<div class="animation">
				<div class="animation1">
					<img class="bomb" src="images/bombs.png" alt="bombs">
					<svg class="explosion" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
						 viewBox="0 0 22.778 22.778" style="enable-background:new 0 0 22.778 22.778;" xml:space="preserve">
					<g>
						<g>
							<polygon class="outter-fire" points="17.931,15.433 18.83,10.328 14.412,12.625 12.438,8.625 10.468,12.616 6.05,10.269 
								6.912,15.437 2.098,16.137 4.685,18.66 5.68,18.66 3.59,16.622 7.713,16.021 6.967,11.542 10.773,13.566 12.438,10.193 
								14.103,13.568 17.903,11.593 17.122,16.017 21.285,16.622 19.196,18.66 20.19,18.66 22.778,16.137 		"/>
							<polygon class="middle-fire" points="16.322,16.545 16.95,12.977 13.84,14.594 12.427,11.732 11.02,14.583 7.917,12.935 
								8.518,16.548 5.119,17.042 6.777,18.66 8.766,18.66 8.102,18.012 10.121,17.718 9.748,15.481 11.631,16.483 12.427,14.87 
								13.222,16.479 15.095,15.507 14.704,17.714 16.752,18.012 16.088,18.66 18.076,18.66 19.737,17.042 		"/>
							<path class="inner-fire" d="M12.438,17.909c-0.503,0-0.91,0.408-0.91,0.911h1.822C13.35,18.316,12.942,17.909,12.438,17.909z"
								/>
							<polygon class="spark-fire" points="17.915,3.958 14.888,10.515 15.382,10.72 		"/>
							<polygon  class="spark-fire" points="5.694,14.399 0,9.958 5.348,14.809 		"/>
							<polygon  class="spark-fire" points="21.633,11.866 19.072,14.083 19.453,14.458 		"/>
							<polygon class="spark-fire" points="10.303,10.5 8.866,7.43 9.801,10.688 		"/>
						</g>
					</svg>
				</div> <!-- End of Animation1 -->

				<div class="animation2">
					<img class="plane" src="images/airplane.png" alt="plane">
					<img class="car" src="images/car.png" alt="car">
				</div> <!-- End of Animation2 -->

				<div class="animation3">
					<img class="talking animated tada" src="images/chatting.png" alt="car">
					<img class="reading animated tada" src="images/reading.png" alt="map">
					<img class="weather animated tada" src="images/jacket.png" alt="plane">
				</div> <!-- End of Animation2 -->
			
				<div class="animation4">
					<img class="band-aid" src="images/band-aid.png" alt="map">
					<img class="dancing" src="images/party.png" alt="plane">
				</div> <!-- End of Animation2 -->

				<div class="animation5">
					<img class="flag" src="images/canada.png" alt="map">
					<img class="leaf" src="images/leaf.png" alt="plane">
				</div> <!-- End of Animation2 -->

			</div> <!-- Enf of Animation -->

			<div class="text">
			</div> <!-- End of Text -->
		</div> <!-- End of Content -->
		<div id="forwards" class="arrow arrow__forwards"><i class="fa fa-angle-right" aria-hidden="true"></i></div>
	</div> <!-- End of Wrapper -->

	<footer>
	<p> Images from <a href="www.freepik.com">FreePik</a></p>
	</footer>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
	<script src="information.js"></script>
	
	<script>
		$(function(){
			var currentFrame = 0;
			var currentParagraph = 1;
			var clickCounter = 0;

			if (clickCounter === 0){
					$(".arrow.arrow__backward").css("visibility", "hidden");
				}

			

			function frameFinder(clicks){
				if(clicks <= 2) {
					currentFrame = 0;
				} else if (clicks > 2 && clicks <= 5){
					currentFrame = 1;
				} else if (clicks > 5 && clicks <= 8){
					currentFrame = 2;
				} else if (clicks > 8 && clicks <= 11){
					currentFrame = 3;
				} else if (clicks > 11 && clicks <= 14){
					currentFrame = 4  ;
				}


				if(clicks % 3 === 0 || clicks === 0) {
					currentParagraph = 1;
				}
				else {
					currentParagraph++;
				}
			}


			function frameFinderBack(clicks){
			             
			                if (clickCounter <= 0) {
			                	clickCounter = 0;
			                	currentFrame = 0;
			                }

			                if (currentParagraph === 1){
			                	currentFrame = currentFrame - 1;
			                }

			                if (clicks === 0){
			                    currentParagraph = 0;
			                } else if(clicks % 3 === 0) {
			                    currentParagraph = 3;
			                } else  {
			                    currentParagraph--;
			                }

			            }

			function show(frame, paragraph){
				if (text[frame]  && paragraph === 1) {
					$('.text').html(`<p>${text[frame].paragraph1}</p>`);
					console.log("p1")
				}
				else if (text[frame]  && paragraph === 2) {
					$('.text').html(`<p>${text[frame].paragraph2}</p>`);
					console.log("p2")
				}
				else if (text[frame] && paragraph === 3) {
					$('.text').html(`<p>${text[frame].paragraph3}</p>`);
					console.log("p3");
				}

			}

			$('#forwards').on('click', function(){
				// console.log(clickCounter);
				frameFinder(clickCounter);
				clickCounter++;
				console.log(clickCounter);
				console.log(currentFrame);
				show(currentFrame, currentParagraph);



				if (clickCounter >= 1){
					$(".arrow.arrow__backward").css("visibility", "visible");
				}
				
				if(clickCounter === 4){
					

					// the problem with the resize function is that it only runs once the user resizes. So if the user starts from a mobile screen size the background will be there because the user didn't resize their browser yet. Once the user resizes the background disappears and re-appears once it reaches the desktop size. So the solution is to add an initial state, before the user resizes.

					// 1- set the initial background for desktop
					$('body').css( "background-image",  'url("images/smily.png")');
					// 2- remove the initial background for mobile 
					if ($(window).width() < 940) { 
			      		$('body').css( "background-image",  "none"); 
					};
 					// 3- if user resizes browser, change initial state accordingly
					$(window).resize(function(){
					        if ($(window).width() < 940) { 
					              $('body').css( "background-image",  "none"); 
					        }
					        else if ($(window).width() > 940) { 
					              $('body').css( "background-image",  'url("images/smily.png")'); 
					        } 
					 })
					
					$('.animation1').fadeOut();
					$('.animation1').css("display", "none");
					$('.animation2').fadeIn();
				}

				if(clickCounter === 7){
					$('body').css("background-image", 'url("images/sleepy-boy.png")');

					if ($(window).width() < 940) { 
			      		$('body').css( "background-image",  "none"); 
					};

					$(window).resize(function(){
					       if ($(window).width() <= 940) { 
					             $('body').css( "background-image",  "none"); 
					       } 
					})
				
					$('.animation2').fadeOut();
					$('.animation2').css("display", "none");
					$('.animation3').fadeIn();
				}

				if(clickCounter === 10){
					$('body').css("background-image", 'url("images/big-smile.png")');
					if ($(window).width() < 940) { 
			      		$('body').css( "background-image",  "none"); 
					};
					$(window).resize(function(){
					       if ($(window).width() <= 940) { 
					             $('body').css( "background-image",  "none"); 

					       }    
					})


					$('.animation3').fadeOut();
					$('.animation3').css("display", "none");
					$('.animation4').fadeIn();
				}

				if(clickCounter === 13){
					
					$('body').css("background-image", 'url("images/happy-boy.png")'); 
					if ($(window).width() < 940) { 
			      		$('body').css( "background-image",  "none"); 
					};
					$(window).resize(function(){
					       if ($(window).width() <= 940) { 
					             $('body').css( "background-image",  "none"); 

					       } 
					})
					
						
					
					$('.animation4').fadeOut();
					$('.animation4').css("display", "none");
					$('.animation5').fadeIn();
				}

				if(clickCounter === 15){
					$(".arrow.arrow__forwards").css("visibility", "hidden");
				}
			});

			
			$('#backward').on('click', function(){
				clickCounter--;				
				frameFinderBack(clickCounter);
				console.log(clickCounter);
				console.log(currentFrame);
				show(currentFrame, currentParagraph);

				if(clickCounter === 0){
						$(".arrow.arrow__backward").css("visibility", "hidden");
					}

				if(clickCounter === 3){
					
					$('body').css("background-image", 'url("images/suffering.png")');
					if ($(window).width() < 940) { 
			      		$('body').css( "background-image",  "none"); 
					};
					$(window).resize(function(){
					       if ($(window).width() <= 940) { 
					             $('body').css( "background-image",  "none"); 

					       } 
					})
					$('.animation2').fadeOut();
					$('.animation2').css("display", "none");
					$('.animation1').fadeIn();
				}

				if(clickCounter === 6){
					$('body').css("background-image", 'url("images/smily.png")');
					if ($(window).width() < 940) { 
			      		$('body').css( "background-image",  "none"); 
					};
					$(window).resize(function(){
					       if ($(window).width() <= 940) { 
					             $('body').css( "background-image",  "none"); 

					       } 
					})

					$('.animation3').fadeOut();
					$('.animation3').css("display", "none");
					$('.animation2').fadeIn();
				}

				if(clickCounter === 9){
					$('body').css("background-image", 'url("images/sleepy-boy.png")');
					if ($(window).width() < 940) { 
			      		$('body').css( "background-image",  "none"); 
					};
					$(window).resize(function(){
					       if ($(window).width() <= 940) { 
					             $('body').css( "background-image",  "none"); 

					       } 
					})

					$('.animation4').fadeOut();
					$('.animation4').css("display", "none");
					$('.animation3').fadeIn();
				}

				if(clickCounter === 12){
					$('body').css("background-image", 'url("images/big-smile.png")');
					if ($(window).width() < 940) { 
			      		$('body').css( "background-image",  "none"); 
					};
					$(window).resize(function(){
					       if ($(window).width() <= 940) { 
					             $('body').css( "background-image",  "none"); 

					       } 
					})

					$('.animation5').fadeOut();
					$('.animation5').css("display", "none");
					$('.animation4').fadeIn();
				}

				if(clickCounter === 14){
						$(".arrow.arrow__forwards").css("visibility", "visible");
				}

				
			});


		});
		
	</script>
	

</body>
</html>